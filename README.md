<br>

<h1 align="center">🍽️ Eatzzy </h1>

<div align="center">
  <img src="logo.png" alt="eatzzy logo" width="400" height="400" align="center" />
</div>

<h3 align="center">3팀 - Team Matfia </h3>

<br>

## 🕵️ 팀원 소개

<div align="center">

|     <img src="logo.png" width="100" height="100"/>      |  <img src="images/kirby.jpeg" width="100" height="100"/>   |     <img src="logo.png" width="100" height="100"/>      |    <img src="logo.png" width="100" height="100"/>     |      <img src="logo.png" width="100" height="100"/>       |        <img src="logo.png" width="100" height="100"/>         |
| :-----------------------------------------------------: | :--------------------------------------------------------: | :-----------------------------------------------------: | :---------------------------------------------------: | :-------------------------------------------------------: | :-----------------------------------------------------------: |
| **박상미**<br/>[@miyad927](https://github.com/miyad927) | 🐱 **박세연**<br/>[@yeon7485](https://github.com/yeon7485) | **안규호**<br/>[@Ahngyuho](https://github.com/Ahngyuho) | **오승재**<br/>[@dhtmdwo](https://github.com/dhtmdwo) | **유승호**<br/>[@seungho99](https://github.com/seungho99) | **천태훈**<br/>[@taehoon0518](https://github.com/taehoon0518) |

</div>
<br>

## 🍕 프로젝트 소개

최근 소비자들은 고물가 시대에도 불구하고 유명 스타 셰프들이 운영하는 맛집을 기꺼이 찾아가고 있다.
이는 미식에 대한 관심이 높아지고, 특별한 경험을 위해 비용을 아끼지 않으려는 소비 성향을
반영한 결과이다.

특히 방송 프로그램 '흑백 요리사’의 인기가 이러한 트렌드에 더욱 불을 지피며, 유명 맛집에 대한 수요를
한층 높이고 있다. 그러나 이러한 맛집의 수가 제한적이기 때문에 예약 경쟁이 치열한 상황이다.

**Eatzzy**은 주변 유명 맛집과 음식점을 예약할 수 있는 서비스를 제공하며, 예약에 실패한 고객들을 위해 해당 맛집의 노하우가 담긴 밀키트를 집으로 배달하는 서비스를 추가로 제공한다.

또한, 집에서 편안하게 맛집 음식을 즐기고 싶은 고객이나 거리가 멀어 직접 방문이 어려운 고객들은 밀키트 구매를 통해 식당 방문 여부와 관계없이 맛집의 요리 경험을 간편하게 집에서도 느낄 수 있다.

<br>

## 🍔 기술 스택

![VMWare](https://img.shields.io/badge/VMware-607078?logo=vmware&logoColor=white&style=for-the-badge)
![Ubuntu](https://img.shields.io/badge/ubuntu-E95420?style=for-the-badge&logo=ubuntu&logoColor=FFFFFF)

![MariaDB](https://img.shields.io/badge/MariaDB-003545?style=for-the-badge&logo=mariadb&logoColor=white)

![Prometheus](https://img.shields.io/badge/Prometheus-E6522C?style=for-the-badge&logo=Prometheus&logoColor=white)
![Grafana](https://img.shields.io/badge/grafana-%23F46800.svg?style=for-the-badge&logo=grafana&logoColor=white)

![Git](https://img.shields.io/badge/git-%23F05033.svg?style=for-the-badge&logo=git&logoColor=white)
![GitHub](https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white)
![Discord](https://img.shields.io/badge/Discord-5865F2.svg?style=for-the-badge&logo=discord&logoColor=white)

<br>

## 프로젝트 기획안

[프로젝트 기획안](https://docs.google.com/document/d/1yTdJoi2CMtNkD5Jb95j-Yd6mb683Dsed7SkipP3Y_OQ/edit?usp=sharing)

## 요구사항 정의서

[요구사항 정의서](https://docs.google.com/spreadsheets/d/1z77Uiao0gpiSDFSjn_s0IWXpiW5H4l5b6ge02403aCI/edit?usp=sharing)

## ERD

[ERD 다이어그램](https://www.erdcloud.com/d/i9Qf2BLnaAYZ4dCrH)

## 시스템 아키텍처

<img src="images/시스템아키텍처.png" alt="시스템 아키텍처" width="500" align="center" />

## 재해 복구 (DR)

## SQL

<details>
<summary>사용자</summary>

<summary>회원가입</summary>

</details>

<details>
<summary>식당</summary>

<summary>고객이 좋아요 한 식당 조회</summary>
<img src="sql/식당/고객이 좋아요 한 식당 조회.webp" alt="고객이 좋아요 한 식당 조회" width="500" align="center" />

<summary>식당 상세 조회</summary>
<img src="sql/식당/식당 상세 조회.webp" alt="식당 상세 조회" width="500" align="center" />

<summary>식당 전체 조회_좋아요순 정렬</summary>
<img src="sql/식당/식당 상세 조회.webp" alt="식당 상세 조회" width="500" align="center" />

<summary>식당 검색</summary>
<img src="sql/식당/식당검색.webp" alt="식당검색" width="500" align="center" />

<summary>점주 식당 등록</summary>
<img src="sql/식당/점주 식당 등록.png" alt="식당검색" width="500" align="center" />

<summary>점주 식당예약 조회</summary>
<img src="sql/식당/점주 식당예약 조회.png" alt="식당검색" width="500" align="center" />

<summary>점주의 식당 조회</summary>
<img src="sql/식당/점주의 식당 조회.png" alt="식당검색" width="500" align="center" />

<summary>식당등록거절</summary>
<img src="sql/식당/식당등록거절.png" alt="식당검색" width="500" align="center" />

<summary>식당등록수락</summary>
<img src="sql/식당/식당등록수락.png" alt="식당검색" width="500" align="center" />

<summary>식당카테고리등록</summary>
<img src="sql/식당/식당카테고리등록.png" alt="식당검색" width="500" align="center" />

</details>

<details>
<summary>상품</summary>

<summary>상품 리뷰 확인</summary>
<img src="sql/상품/상품리뷰확인.png" alt="식당검색" width="500" align="center" />
<summary>상품 리뷰 등록</summary>
<img src="sql/상품/상품리뷰등록.png" alt="식당검색" width="500" align="center" />
<summary>상품 확인</summary>
<img src="sql/상품/상품리뷰확인.png" alt="식당검색" width="500" align="center" />

<summary>상품 카테고리 등록</summary>
<img src="sql/상품/상품 카테고리 등록.png" alt="식당검색" width="500" align="center" />

<summary>상품 리뷰 수정</summary>
<img src="sql/상품/상품리뷰수정.png" alt="식당검색" width="500" align="center" />

<summary>상품 리뷰 수정</summary>
<img src="sql/상품/상품리뷰수정2.png" alt="식당검색" width="500" align="center" />

<summary>상품 리뷰 삭제</summary>
<img src="sql/상품/상품리뷰삭제.png" alt="식당검색" width="500" align="center" />

<summary>상품 바로 구매 </summary>
<img src="sql/상품/상품바로구매.png" alt="식당검색" width="500" align="center" />

<details>
<summary>장바구니</summary>

<summary>장바구니 담기</summary>
<img src="sql/상품/장바구니 담기.png" alt="식당검색" width="500" align="center" />
<summary>장바구니 조회</summary>
<img src="sql/상품/장바구니 조회.png" alt="식당검색" width="500" align="center" />

<summary>장바구니 물품 주문</summary>
<img src="sql/상품/장바구니물품주문.png" alt="식당검색" width="500" align="center" />

</details>

</details>

<details>
<summary>주문</summary>

<summary>전체 주문 내역 조회</summary>
<img src="sql/주문/전체 주문 내역 조회.png" alt="식당검색" width="500" align="center" />
<summary>주문 상세 내역 조회</summary>
<img src="sql/주문/주문 상세 내역 조회.png" alt="식당검색" width="500" align="center" />

<summary>주문 현황 확인</summary>
<img src="sql/주문/주문현황확인.png" alt="식당검색" width="500" align="center" />

</details>

<details>
<summary>배송</summary>

<summary>배송 등록</summary>
<img src="sql/배송/배송등록.png" alt="식당검색" width="500" align="center" />
<summary>배송 조회</summary>
<img src="sql/배송/배송조회.png" alt="식당검색" width="500" align="center" />

</details>

<details>
<summary>결제</summary>
</details>

## SQL 성능 개선

기존 sql은 인기 있는 가게의 정보를 빼오기 위해서는 다섯개의 테이블을 JOIN 해야했다.  
하지만 그랬을 때 성능적인 부분에서 결함이 많았고 해당 정보를 빠르게 받아오기 위해 테이블을 하나 추가해 정보를 저장했다.

<details>
<summary>수정 전 쿼리</summary>

```sql
SELECT stores.idx, store_images.image_path, stores.name, stores_category.name,
        ROUND(AVG(store_reviews.star_point), 1) AS average_star_point,
        COUNT(store_reviews.idx) AS count_reviews,
        stores.opening_hours, COUNT(likes.idx) AS count_likes
  FROM stores
  JOIN stores_category ON stores_category.idx = stores.category_id
  JOIN store_images ON store_images.store_id = stores.idx
  JOIN store_reviews ON store_reviews.store_id = stores.idx
  JOIN likes ON stores.idx = likes.store_id
  GROUP BY stores.idx
  ORDER BY count_likes DESC
  LIMIT 10;
```

</details>

<details>
<summary>수정 후 쿼리</summary>

```sql
SELECT
    store_id,
    image_path,
    store_name,
    category_name,
    average_star_point,
    count_reviews,
    count_likes,
    opening_hours
FROM stores_summary
ORDER BY count_likes DESC
LIMIT 10;
```

</details>

<details>
<summary>새로 도입한 테이블</summary>

```sql
CREATE TABLE stores_summary (
    store_id INT PRIMARY KEY,
    image_path VARCHAR(255),
    store_name VARCHAR(255),
    category_name VARCHAR(255),
    average_star_point DECIMAL(3, 1),
    count_reviews INT,
    count_likes INT,
    opening_hours VARCHAR(255)
);
```

</details>

수정 전 CPU 사용량

<img src="sql_modify/수정전.png" width="500" align="center" />

수정 후 CPU 사용량

<img src="sql_modify/수정후.png" width="500" align="center" />

수정 전 작동 시간

<img src="sql_modify/수정전_1.png" width="500" align="center" />

수정 후 작동 시간

<img src="sql_modify/수정후_1.png" width="500" align="center" />
